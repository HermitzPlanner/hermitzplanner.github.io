<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Planner</title>

    <script defer src="js/databrands.js" type="text/javascript"></script>

    <script defer src="js/cbox.js" type="text/javascript"></script>
    <script defer src="js/datauser.js"></script>
    <script defer src="js/galleryfetch.js" type="text/javascript"></script>
    <script defer src="js/menu-options.js" type="text/javascript"></script>
    <script defer src="js/mode-options.js" type="text/javascript"></script>


    <script defer src="js/components/components.js" type="text/javascript"></script>
    <script defer src="js/components/component-selectall.js" type="text/javascript"></script>
    <script defer src="js/components/component-batch.js" type="text/javascript"></script>
    <script defer src="js/components/component-animation.js" type="text/javascript"></script>
    <script defer src="js/events-all.js" type="text/javascript"></script>

    <link rel="stylesheet" href="css/events-all.css">
    <link rel="stylesheet" href="css/skins.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/gallery.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">

    <link rel="icon" type="image/png" href="assets/pallas.png" sizes="16x16">
    <link rel="icon" type="image/png" href="assets/pallas.png" sizes="32x32">



</head>
<!-- <button onclick="capture();">capture</button> -->

<body onload="mobileCheck();">
    <header class="header">

        <input type="checkbox" id="header-modes" onchange="modesoptions();" onmouseleave="modesleave();">

        <label class="header-button" id="header-modes-label" for="header-modes">
            <div style="display: flex; align-items: center; gap: 5%;">
                <img src="svg/shirt.svg" style="filter: invert();" alt="">
                <div>Skins</div>
            </div>
        </label>

        <div class="modes-btn" id="modes-options" style="display: none;">
            <!-- skinSummary(); -->
            <input type="checkbox" id="header-summary" onchange="skinPlanner();">

            <label class="header-button-opt" for="header-summary" id="header-summary-label">
                <div class="opt-item" style="display: flex; align-items: center; gap: 5%;">
                    <img id="summary-svg" src="svg/pen-to-square-solid.svg" style="filter: invert();" alt="">
                    <div>Planner</div>
                </div>
            </label>

            <!-- <a href="index.html#batch1">Skin Planner</a> -->
            <input type="checkbox" id="header-blacklist" onchange="skinGallery(); galleryfetch();">

            <label class="header-button-opt" id="header-blacklist-label" for="header-blacklist">
                <div class="opt-item" style="display: flex; align-items: center; gap: 5%;">
                    <img id="gallery-svg" src="svg/table-cells-solid.svg" style="filter: invert();" alt="">
                    <div>Gallery</div>
                </div>
            </label>

            <!-- <input type="checkbox" id="header-summary" onchange="skinSummary();">

            <label class="header-button-opt" for="header-summary" id="header-summary-label">
                <div class="opt-item" style="display: flex; align-items: center; gap: 5%;">
                    <img id="summary-svg" src="svg/list-solid.svg" style="filter: invert();" alt="">
                    <div>Summary</div>
                </div>
            </label> -->




        </div>

        <input type="checkbox" id="header-options" onchange="menuoptions();" onmouseleave="menuleave();">

        <label class="header-button" id="header-options-label" for="header-options">
            <div style="display: flex; align-items: center; gap: 5%; outline: 0px dashed gold;" id="opt-div">
                <img src="svg/options.svg" style="filter: invert();" alt="">
                <div>Options</div>
            </div>
        </label>

        <div id="lol" class="lol">
            <input type="checkbox" id="header-reset" onchange="selectionReset();">
            <label class="header-button-opt" id="header-reset-label" for="header-reset">
                <div class="opt-item" style="display: flex; align-items: center; gap: 5%;">
                    <img src="svg/reset.svg" style="filter: invert();" alt="">
                    <div>Reset</div>
                </div>
            </label>
            <input type="checkbox" id="save-btn" onchange="downloadFile();">
            <label class="header-button-opt" id="save-btn-label" for="save-btn">
                <div class="opt-item" style="display: flex; align-items: center; gap: 5%;">
                    <img src="svg/save.svg" style="filter: invert();" alt="">
                    <div>Save</div>
                </div>
            </label>
            <input type="file" id="load-btn" onchange="loadFile();">
            <label class="header-button-opt" id="load-btn-label" for="load-btn">
                <div class="opt-item" style="display: flex; align-items: center; gap: 5%;">
                    <img src="svg/load.svg" style="filter: invert();" alt="">
                    <div>Load</div>
                </div>
            </label>
            <!-- <input type="checkbox" id="tutorial-btn" onchange="showTutorial();">
            <label class="header-button-opt" id="tutorial-btn-label" for="tutorial-btn">
                <div class="opt-item" style="display: flex; align-items: center; gap: 5%;">
                    <img src="svg/bars-solid.svg" style="filter: invert();" alt="">
                    <div>Tutorial</div>
                </div>
            </label> -->
        </div>

        <input type="checkbox" id="header-discord">

        <label class="header-button" id="header-discord-label" for="header-discord">
            <a href="https://discord.gg/uGRu9j88H9" target="_blank"
                style="display: flex; align-items: center; gap: 5%; outline: 0px dashed gold;">
                <img src="svg/discord2.svg" style="filter: invert();" alt="">
                <div>Discord</div>
            </a>
        </label>

        <input type="checkbox" id="header-kofi">

        <label class="header-button" id="header-kofi-label" for="header-kofi">
            <a href="https://ko-fi.com/hermitzplanner" target="_blank"
                style="display: flex; align-items: center; gap: 5%; outline: 0px dashed gold;">
                <img src="svg/kofi.png" alt="">
                <div>Donate</div>
            </a>
        </label>




    </header>

    <main id="main">
        <div class="slider-container">
            <input type="checkbox" id="slider" onchange="menuSlider();">
            <label for="slider">
                <div class="slider" id="slidertwo">
                    <div class="hide"></div>
                    <img id="sliderthree" width="20px" height="20px" src="svg/arrow-left-solid.svg" alt="">
                </div>
            </label>
        </div>

        <section class="full-image">

            <div id="full-image-container">
                <div id="mobile-view-details"
                    style="position: absolute; bottom: 0; padding: 5vh; z-index: 999; display: none;">
                    <button onclick="mobileSkinStats();"
                        style="background-color: hsl(0, 0%, 30%); border-radius: 10px; padding: .125rem .5rem; border: none; color: #fff; cursor: pointer;">View
                        Skin Details</button>
                </div>

                <img src="svg/x-solid.svg" class="quit-btn" style="filter: invert();" onclick="displayArt();" alt="">
                <img id="full-image" src="" alt="">
                <div class="gallery-view" id="gallery-view">

                    <div class="gallery-row first-row">
                        <div style="outline: 0px dashed red; display: flex; flex-flow: column;">
                            <span class="gallery-element name gallery-name" id='gallery_view-english'> </span>
                            <span style="padding: .25rem;"></span>
                            <span class="gallery-element" id='gallery_view-skinnameenglish'> </span>
                        </div>
                        <div>
                            <img src="" class="gallery-element" id='gallery_view-icon'>
                            <!-- <span class="gallery-info2">loasd</span> -->
                        </div>
                    </div>

                    <!-- <div class="gallery-row first-row" style="justify-content: center;">
                            <span style="background-color: hsl(0, 0%, 30%); border-radius: 10px; padding: .125rem .5rem;">view full image</span>
                    </div> -->

                    <div class="gallery-row first-row" id="mobile-view-image"
                        style="justify-content: center; display: none;">
                        <button onclick="mobileViewImage();"
                            style="background-color: hsl(0, 0%, 30%); border-radius: 10px; padding: .125rem .5rem; border: none; color: #fff; cursor: pointer; z-index: 999;">View
                            Full Image</button>
                    </div>

                    <div class="gallery-row first-row">
                        <span class="gallery-info">Obtain</span>
                        <div class="gallery-info2">
                            <span id='gallery_view-obtain'></span>
                        </div>
                    </div>

                    <div class="gallery-row first-row">
                        <span class="gallery-info">Price</span>
                        <div class="gallery-info2">
                            <span id='gallery_view-price'></span>
                            <img src="" style="height: 2.5vh;" id='gallery_view-currency'>
                        </div>
                    </div>

                    <div class="gallery-row" style="display: flex; justify-content: space-between;">
                        <span class="gallery-info">CN Release</span>
                        <span class="gallery-info2" id='gallery_view-release'></span>
                    </div>
                    <div class="gallery-row" style="display: flex; justify-content: space-between;">
                        <span class="gallery-info">NA Release</span>
                        <span class="gallery-info2" id='gallery_view-release-global'></span>
                    </div>

                    <div class="gallery-row" style="display: flex; justify-content: space-between;">
                        <span class="gallery-info">Artist</span>
                        <span class="gallery-info2" id='gallery_view-artist'></span>
                    </div>

                    <div class="gallery-row" style="display: flex; justify-content: space-between;">
                        <span class="gallery-info">Brand</span>
                        <span class="gallery-info2" id='gallery_view-brand'></span>

                    </div>
                    <div id="chibi-container" class="gallery-video">
                        <div id="chibi">
                        </div>
                        <!-- <span class="loader"></span> -->
                    </div>

                    <!-- <div class="video-buttons">
                        <button class="video-button" onclick="playPause();"><img src="svg/play-solid.svg" alt=""></button>
                        <button class="video-button" onclick="stop();"><img src="svg/stop-solid.svg" alt=""></button>
                    </div> -->
                    <div
                        style="display: flex; justify-content: space-around; outline: 0px solid gold; width: 100%; gap: 5%;">
                        <select style="width: 40%;" name="perspective" id="perspective">
                            <option selected value="front">Front</option>
                            <option id="backpers" value="back">Back</option>
                            <option value="build">Base</option>
                        </select>

                        <select style="width: 40%;" name="animation" id="animation">
                        </select>

                        <select style="width: 20%;" name="speed" id="speed">
                            <option value="0.1">x0.1</option>
                            <option value="0.5">x0.5</option>
                            <option selected value="1">x1</option>
                            <option value="2">x2</option>

                        </select>

                        <button class="download-button" onclick="downloadChibi();"><img width="20px" style="filter: invert();" src="svg/save.svg" alt=""></button>
                        <script>
                            function downloadChibi() {
                            let name = document.querySelector("#gallery_view-english").innerHTML
                            app.renderer.render(app.stage);

                            const image = new Image();
                            image.src = app.view.toDataURL();

                            const link = document.createElement('a');
                            link.href = image.src;
                            link.download = `chibi-${name}`;
                            link.click(); 
                        }
                        </script>
                    </div>


                </div>

                <div class="menu-element scroll-drag">
                    <div class="menu-svg-tutorial">
                        <img src="svg/computer-mouse-solid.svg" style="filter: invert();" alt="">
                    </div>
                    <div class="numbers-tutorial" style="display: flex; flex-flow: row;">
                        <div style="display: flex; gap: .125rem; font-size: 1.5vh;">
                            <div><span class="price">Scroll or Drag</span> while visualizing the art image</div>
                        </div>
                    </div>
                </div>

            </div>

        </section>

        <section class="events">
            <ul class="menu left " id="event-container">
                <li>
                    <div class="tutorial" id="tutorial" style="display: none;">

                        <div class="menu-numbers-tutorial">

                            <div class="menu-element">
                                <div class="menu-svg-tutorial">
                                    <img src="svg/puregem.png" class="" alt="">
                                </div>

                                <div class="numbers-tutorial" style="display: flex;">

                                    <div><span class="price">Primes</span> that you will own during the event</div>
                                </div>
                            </div>

                            <div class="menu-element">
                                <div class="menu-svg-tutorial">
                                    <img src="svg/badge.png" class="" alt="">
                                </div>

                                <div class="numbers-tutorial" style="display: flex;">

                                    <div><span class="price">Reward</span> of the event (assuming 100% clear)</div>
                                </div>
                            </div>

                            <div class="menu-element">
                                <div class="menu-svg-tutorial">
                                    <img src="svg/price-tag.png" alt="">
                                </div>
                                <div class="numbers-tutorial" style="display: flex; flex-flow: row;">
                                    <div style="display: flex; gap: .125rem;">
                                        <div><span class="price">Cost</span> of the skins selected</div>
                                    </div>
                                </div>
                            </div>

                            <span style="padding: .25rem;"></span>
                            <span style="border-bottom: 1px solid hsl(0, 0%, 25%); width: 100%;"></span>

                            <div class="menu-element">
                                <div class="menu-svg-tutorial">
                                    <img src="svg/arrow-pointer-solid.svg" style="filter: invert();" alt="">
                                </div>
                                <div class="numbers-tutorial" style="display: flex; flex-flow: row;">
                                    <div style="display: flex; gap: .125rem;">
                                        <div><span class="price">Start</span> by clicking on an event from the left side
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="menu-element">
                                <div class="menu-svg-tutorial">
                                    <img src="svg/search.svg" style="filter: invert();" alt="">
                                </div>
                                <div class="numbers-tutorial" style="display: flex; flex-flow: row;">
                                    <div style="display: flex; gap: .125rem;">
                                        <div><span class="price">Visualize</span> the art image by clicking this icon
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- <div class="menu-element">
                                <div class="menu-svg-tutorial">
                                    <img src="svg/computer-mouse-solid.svg" style="filter: invert();" alt="">
                                </div>
                                <div class="numbers-tutorial" style="display: flex; flex-flow: row;">
                                    <div style="display: flex; gap: .125rem;">
                                        <div><span class="price">Scroll or Drag</span> while visualizing the art image</div>
                                    </div>
                                </div>
                            </div> -->




                            <!-- <span style="padding: .25rem;"></span>
                            <span style="border-bottom: 1px solid hsl(0, 0%, 25%); width: 100%;"></span>


                            <span style="padding: .25rem;"></span>
                            <div class="menu-element">
                                <div class="menu-svg-tutorial">
                                    <img src="svg/x-solid.svg" style="filter: invert() opacity(0)" alt="">
                                </div>

                                <div class="numbers-tutorial" style="display: flex; flex-flow: row;">
                                    <input type="checkbox" id="cbox-hide-tuto" onchange="hideTutorial();">
                                    <label for="cbox-hide-tuto">
                                        <div style="background: hsl(0, 0%, 30%); padding: .25rem; border-radius: 10px; cursor: pointer;"
                                            class="hide-tuto">
                                            Hide tutorial
                                        </div>
                                    </label>
                                </div>
                            </div> -->
                        </div>
                    </div>

                    <div
                        style="display: flex; outline: 0px dashed fuchsia; background: hsl(0, 0%, 12.5%); border-bottom: 1px solid hsl(0, 0%, 25%);">
                        <div
                            style="display: flex; width: 77.5%; align-items: center; opacity: 0; outline: 0px dashed cyan; gap: 1rem; justify-content: space-around;">
                        </div>

                    </div>



                </li>

                <div style="display: flex; background: hsl(0, 0%, 12.5%);">
                    <div style="width: 77.5%; font-size: 1.25vh; outline: 0px solid fuchsia; opacity: 0;">
                    </div>
                    <!-- <span class="gap"></span> -->
                    <div
                        style="font-size: 1.25vh; outline: 0px solid fuchsia; padding-left: .125rem; padding-top: .5rem;">
                        Initial primes <span style="color: red;">*</span>
                    </div>
                </div>

                <div style="display: flex; outline: 0px dashed fuchsia; padding: .75rem;" class="prim">


                    <div>
                        <input type="checkbox" id="cbox-hide-tuto" style="display: none;" onchange="displayTutorial();">
                        <label for="cbox-hide-tuto">
                            <div class="hide-tuto tuto-btn">
                                ?
                            </div>
                        </label>
                    </div>
                    <div
                        style="display: flex; width: 77.5%; align-items: center; outline: 0px dashed cyan; gap: 1rem; justify-content: space-around;">
                        <div>
                            <input type="checkbox" id="skin-summary" style="display: none;" onchange="skinSummary();">
                            <label for="skin-summary" id="skin-summary-label">
                                <div class="hide-tuto tuto-btn">
                                    Selection Summary
                                </div>
                            </label>
                        </div>
                    </div>

                    <div style="width: 22.5%; outline: 0px solid gold;">
                        <input type="number" class="initial-input" id="menu-initialprime" value="0" min="0">
                    </div>
                    <script>
                        document.getElementById("menu-initialprime").addEventListener("keydown", function (event) {
                            // Check if the key pressed is a negative sign or any non-numeric character
                            if (event.key === "-" || (/\D/.test(event.key) && event.keyCode !== 8)) {
                                // Prevent the input from being entered
                                event.preventDefault();
                            }
                        });
                    </script>

                </div>

            </ul>
        </section>

        <section class="skins" id="skins">
            <ul id="container"></ul>
        </section>

        <section id="gallery-container" style="display: none;">
            <div class="card-event-name flex">Skin gallery</div>
            <div style="width: 100%; display: flex; outline: 0px dashed cyan; padding: 0rem 1rem; gap: 10px">
                <div id="gal-input3" class="initial-input2 initial-input-text">Search skin <div style="color: red;">*
                    </div>
                </div>
                <div id="gal-input4" class="initial-input2 initial-input-text">Brands<div style="color: red;">*</div>
                </div>
            </div>
            <div style="width: 100%; display: flex; outline: 0px dashed cyan; padding: 0rem 1rem; gap: 10px">
                <input type="search" class="initial-input2" id="search" data-search>
                <select class="initial-input2" name="brand-select" id="search2" data-search2>
                    <option disabled value="">Select brand</option>
                    <option selected value="">All brands</option>
                </select>

                <!-- <div style="margin-left: 20px;" class="select-all">
                    <input type="checkbox" id="ban-select" onClick="banSelect();">
                    <label for="ban-select">
                        <div class="select-all-button" id="select-all-button${this.nbatch}">
                            <img src="svg/check3.svg" alt="">
                            <div class="">Select all</div>
                        </div>
                    </label>
                </div> -->

            </div>
            <div class="ban-container" id="blacklist-container" data-user-cards-container></div>
            <template data-user-template>
                <div class="ban-box">
                    <input type="checkbox" class="raul" name="raul" id="" onchange="" data-input>
                    <label for="" data-input-label>
                        <img class="blacklist" src="" alt="icon" data-header>
                        <div class="ban-text flex" style="overflow: hidden;" data-body></div>
                    </label>

                </div>
            </template>
        </section>


    </main>

    <section class="news news-container" id="news">
        <div style="outline: 0px solid white; max-width: 90%; height: 100%;">
            <div id="news-cont" style="outline: 0px dashed gold; display: flex; height: 50%;">
                <div id="news-img-cont"
                    style="outline: 0px dashed cyan; aspect-ratio: 1; width: 20%; display: flex; justify-content: left; align-items: center;">
                    <img id="news-img" style="aspect-ratio: 1;" src="assets/pallas.png">
                </div>
                <div style="display: flex; flex-flow: column; justify-content: center;">
                    <div id="news-title" class="card-event-name" style="display: flex; padding: 2rem;">
                        HermitzPlanner</div>
                    <div id="news-intro" style="padding: 2rem;">
                        A tool that allows players to
                        <span style="color: gold;">plan</span>
                        and
                        <span style="color: gold;">preview</span>
                        Operator
                        <span style="color: gold;">skins</span>
                        and make informed decisions
                        about
                        which
                        ones to acquire and use.<br><br>
                        Many thanks to the developers of
                        PRTS wiki, Gamepress, Pixi.JS, Pixi-spine.js.<br> And all the people who helped me on the process of making this site.
                    </div>
                </div>
            </div>

            <div
                style="display: flex; flex-flow: column; gap: .5rem; outline: 0px dashed cyan; height: 50%; padding: 0rem 0rem;">
                <div class="new invis" style="display: block; color: black; background: gold;">
                    <div class="select">Jun 17 2023</div>
                </div>
                <div class="new invis" style="display: block;">
                    <div class="select">Current event: Break the Ice Rerun</div>
                </div>
                <div class="new invis" style="display: block;">
                    <div class="select">Added Hortus de Escapismo skins.</div>
                </div>                
                <div class="new invis" style="display: block;">
                    <div class="select">Added missing chibis (except irene / lumen / roberta concert skins)</div>
                </div>  
                <div class="new invis" style="display: block;">
                    <div class="select">Added download button for chibis (as .png)</div>
                </div>  


            </div>
        </div>

    </section>


    <div id="summary-div"
        style="margin: 1rem; padding: .75rem; outline: 0px solid hsl(0, 0%, 40%); display: none; gap: .75rem; flex-flow: column; background: var(--background);">
        <!-- <button onclick="takeScreenshot()" >Take Screenshot</button> -->
        <!-- lol -->
        <div><img src="svg/x-solid.svg" class="quit-btn2" style="filter: invert(); top: 5vh;" onclick="quitSummary();"
                alt=""></div>
        <div class="card-event-name" style="display: flex; justify-content: center; align-items: center;">Selection
            Summary</div>
    </div>

    <script src="js/pixi/pixi.min.js"></script>
    <script src="js/pixi/pixi-spine.js"></script>
    <script src="js/pixi/chibi.js"></script>

    <!-- <script src="js/html2canvas.min.js"></script> -->

</body>

</html>
